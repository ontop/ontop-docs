(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{400:function(e,t,a){"use strict";a.r(t);var s=a(51),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"make-a-new-release"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#make-a-new-release"}},[e._v("#")]),e._v(" Make a new release")]),e._v(" "),a("h2",{attrs:{id:"update-documents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-documents"}},[e._v("#")]),e._v(" Update documents")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("README.md")]),e._v(" in "),a("code",[e._v("build/distribution")]),e._v(". This file will be uploaded to SourceForge and Github Releases")]),e._v(" "),a("li",[a("code",[e._v("README.html")]),e._v(" in "),a("code",[e._v("client/protege")]),e._v(". This file will be displayed in the Protégé Plugin Update window.")]),e._v(" "),a("li",[a("code",[e._v("update.properties")]),e._v(" file in "),a("code",[e._v("client/protege")]),e._v(". This is the configuration file for Protégé plugin Auto Update")])]),e._v(" "),a("h2",{attrs:{id:"create-a-git-branch-for-release"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-git-branch-for-release"}},[e._v("#")]),e._v(" Create a git branch for release")]),e._v(" "),a("div",{staticClass:"language-console extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ git checkout develop\n$ git checkout -b release/v-number\n")])])]),a("h2",{attrs:{id:"update-the-version-numbers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-the-version-numbers"}},[e._v("#")]),e._v(" Update the version numbers")]),e._v(" "),a("p",[e._v("Update pom.xml files by Maven plugin to a SNAPSHOT version:")]),e._v(" "),a("div",{staticClass:"language-console extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ ./mvnw versions:set -DnewVersion=4.0.0-SNAPSHOT\n$ cd protege\n$ ../mvnw versions:set -DnewVersion=4.0.0-SNAPSHOT\n")])])]),a("h2",{attrs:{id:"build-maven-packages"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-maven-packages"}},[e._v("#")]),e._v(" Build Maven packages")]),e._v(" "),a("div",{staticClass:"language-console extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('$ ./mvnw release:clean\n\n# Preparing the release will create the new tag in git and automatically push to github\n# When 100% sure, you can skip the test by `-Darguments="-DskipTests"`\n$ ./mvnw -DperformRelease=true release:prepare\n\n# stage the release\n$ ./mvnw release:perform \n\n# Or stage from a Git tag\n# ./mvnw release:perform  -DconnectionUrl=scm:git:git@github.com:ontop/ontop.git -Dtag=ontop-3.0.0\n')])])]),a("h3",{attrs:{id:"stage-the-maven-artifacts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stage-the-maven-artifacts"}},[e._v("#")]),e._v(" Stage the Maven artifacts")]),e._v(" "),a("ul",[a("li",[e._v("URL: "),a("a",{attrs:{href:"https://oss.sonatype.org",target:"_blank",rel:"noopener"}},[e._v("https://oss.sonatype.org"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v('Navigate to "Staging Repositories" from the left panel')]),e._v(" "),a("li",[e._v("Close the repository by clicking the "),a("code",[e._v("Close")]),e._v(" button")]),e._v(" "),a("li",[e._v("Release the artifacts by clicking the "),a("code",[e._v("Release")]),e._v(" button")])]),e._v(" "),a("h2",{attrs:{id:"build-and-distribute-ontop-bundles"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-and-distribute-ontop-bundles"}},[e._v("#")]),e._v(" Build and distribute Ontop bundles")]),e._v(" "),a("div",{staticClass:"language-console extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# we can start from the `checkout` directory generated during the Maven release\n$ cd target/checkout\n$ ./build-release.sh\n")])])]),a("p",[e._v("Further info: "),a("a",{attrs:{href:"/dev/build"}},[e._v("Build Instruction")])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Make a release in "),a("a",{attrs:{href:"https://github.com/ontop/ontop/releases",target:"_blank",rel:"noopener"}},[e._v("Github Releases"),a("OutboundLink")],1)])]),e._v(" "),a("li",[a("p",[e._v("Deploy the packages to "),a("a",{attrs:{href:"https://sourceforge.net/projects/ontop4obda/files/",target:"_blank",rel:"noopener"}},[e._v("SourceForge"),a("OutboundLink")],1),e._v(" by manual upload or sftp.")])])]),e._v(" "),a("div",{staticClass:"language-console extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ sftp user,ontop4obda@frs.sourceforge.net\n$ cd /home/pfs/project/o/on/ontop4obda\n# sftp://ghxiao,ontop4obda@frs.sourceforge.net/home/pfs/project/o/on/ontop4obda\n")])])]),a("h2",{attrs:{id:"update-docker-hub"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-docker-hub"}},[e._v("#")]),e._v(" Update Docker Hub")]),e._v(" "),a("ul",[a("li",[e._v("Build the docker image using the script")])]),e._v(" "),a("div",{staticClass:"language-console extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# log in to Docker Hub\n# docker login\n$ cd ontop/client/docker/\n# `-C`: multi-stage build. slow, but safe\n# `-x`: push to Docker hub \n$ ./build-image.sh -C -x\n")])])]),a("ul",[a("li",[e._v("Push a new image of "),a("a",{attrs:{href:"https://hub.docker.com/repository/docker/ontop/ontop",target:"_blank",rel:"noopener"}},[e._v("ontop/ontop"),a("OutboundLink")],1),e._v(" to Docker Hub")])]),e._v(" "),a("h2",{attrs:{id:"update-the-ontop-website"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-the-ontop-website"}},[e._v("#")]),e._v(" Update the Ontop Website")]),e._v(" "),a("ul",[a("li",[e._v("Update "),a("a",{attrs:{href:"/guide"}},[e._v("the guide homepage")])]),e._v(" "),a("li",[e._v("Update "),a("a",{attrs:{href:"/guide/releases"}},[e._v("the release notes")])])]),e._v(" "),a("h2",{attrs:{id:"update-the-api-example-repository"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-the-api-example-repository"}},[e._v("#")]),e._v(" Update the API example repository")]),e._v(" "),a("ul",[a("li",[e._v("Update the Ontop version in "),a("a",{attrs:{href:"https://github.com/ontop/ontop-api-examples",target:"_blank",rel:"noopener"}},[e._v("https://github.com/ontop/ontop-api-examples"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"update-branches-for-next-development-iteration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-branches-for-next-development-iteration"}},[e._v("#")]),e._v(" Update branches for next development iteration")]),e._v(" "),a("ul",[a("li",[e._v("Merge the tag for the release to master and the release branch to develop")])]),e._v(" "),a("div",{staticClass:"language-console extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ git checkout develop\n$ git merge release/v-number #branch\n\n# this step is also for triggering the AutoUpdate of Protege plugin\n$ git checkout master\n$ git merge v-number # tag\n")])])]),a("h2",{attrs:{id:"time-for-celebration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#time-for-celebration"}},[e._v("#")]),e._v(" Time for celebration!")]),e._v(" "),a("ul",[a("li",[e._v("Send release emails to several mail lists and social media")])])])}),[],!1,null,null,null);t.default=r.exports}}]);