<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP caching | Ontop</title>
    <meta name="generator" content="VuePress 1.8.2">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.2b9f24ec.css" as="style"><link rel="preload" href="/assets/js/app.5cb056e8.js" as="script"><link rel="preload" href="/assets/js/2.7079d958.js" as="script"><link rel="preload" href="/assets/js/28.47030f7b.js" as="script"><link rel="prefetch" href="/assets/js/10.3e45f6df.js"><link rel="prefetch" href="/assets/js/11.f641cc04.js"><link rel="prefetch" href="/assets/js/12.bec41f17.js"><link rel="prefetch" href="/assets/js/13.ba5b21a1.js"><link rel="prefetch" href="/assets/js/14.c16412b8.js"><link rel="prefetch" href="/assets/js/15.fed933fb.js"><link rel="prefetch" href="/assets/js/16.0421742d.js"><link rel="prefetch" href="/assets/js/17.902b7c2e.js"><link rel="prefetch" href="/assets/js/18.3acdcc74.js"><link rel="prefetch" href="/assets/js/19.f615e6f3.js"><link rel="prefetch" href="/assets/js/20.0dcd0e0c.js"><link rel="prefetch" href="/assets/js/21.c44be0f1.js"><link rel="prefetch" href="/assets/js/22.7e292baf.js"><link rel="prefetch" href="/assets/js/23.d61e7382.js"><link rel="prefetch" href="/assets/js/24.b7f5d61b.js"><link rel="prefetch" href="/assets/js/25.1146d568.js"><link rel="prefetch" href="/assets/js/26.6a33a614.js"><link rel="prefetch" href="/assets/js/27.71a28215.js"><link rel="prefetch" href="/assets/js/29.d174f8c5.js"><link rel="prefetch" href="/assets/js/3.054566e0.js"><link rel="prefetch" href="/assets/js/30.ae2c3b91.js"><link rel="prefetch" href="/assets/js/31.a6b2be11.js"><link rel="prefetch" href="/assets/js/32.bb2136f8.js"><link rel="prefetch" href="/assets/js/33.5b7609fe.js"><link rel="prefetch" href="/assets/js/34.f5f9e8a4.js"><link rel="prefetch" href="/assets/js/35.71b0fa81.js"><link rel="prefetch" href="/assets/js/36.026e53ba.js"><link rel="prefetch" href="/assets/js/37.530b254b.js"><link rel="prefetch" href="/assets/js/38.32ae5f34.js"><link rel="prefetch" href="/assets/js/39.7581a489.js"><link rel="prefetch" href="/assets/js/4.f2eb84b7.js"><link rel="prefetch" href="/assets/js/40.19b65095.js"><link rel="prefetch" href="/assets/js/41.45775c53.js"><link rel="prefetch" href="/assets/js/42.899ad4a1.js"><link rel="prefetch" href="/assets/js/43.d977c052.js"><link rel="prefetch" href="/assets/js/44.73e13f59.js"><link rel="prefetch" href="/assets/js/45.3493762c.js"><link rel="prefetch" href="/assets/js/46.0f44f58f.js"><link rel="prefetch" href="/assets/js/47.8bd49f8f.js"><link rel="prefetch" href="/assets/js/48.3f2e206c.js"><link rel="prefetch" href="/assets/js/49.ef2fb4e9.js"><link rel="prefetch" href="/assets/js/5.621b2c98.js"><link rel="prefetch" href="/assets/js/50.54df2ca7.js"><link rel="prefetch" href="/assets/js/51.67122dcb.js"><link rel="prefetch" href="/assets/js/52.d1640612.js"><link rel="prefetch" href="/assets/js/53.64339430.js"><link rel="prefetch" href="/assets/js/54.35b88360.js"><link rel="prefetch" href="/assets/js/55.6049ac17.js"><link rel="prefetch" href="/assets/js/56.75c61039.js"><link rel="prefetch" href="/assets/js/57.c062b689.js"><link rel="prefetch" href="/assets/js/58.e0168da7.js"><link rel="prefetch" href="/assets/js/59.ae1ebb91.js"><link rel="prefetch" href="/assets/js/6.f371d55f.js"><link rel="prefetch" href="/assets/js/60.64fc8b43.js"><link rel="prefetch" href="/assets/js/61.2127ac01.js"><link rel="prefetch" href="/assets/js/62.99ad9da3.js"><link rel="prefetch" href="/assets/js/63.468a5a8a.js"><link rel="prefetch" href="/assets/js/64.e005d88e.js"><link rel="prefetch" href="/assets/js/65.52616f46.js"><link rel="prefetch" href="/assets/js/66.468602b8.js"><link rel="prefetch" href="/assets/js/67.c1b14dc5.js"><link rel="prefetch" href="/assets/js/68.53ea507b.js"><link rel="prefetch" href="/assets/js/69.35950c9a.js"><link rel="prefetch" href="/assets/js/7.9471bd61.js"><link rel="prefetch" href="/assets/js/70.143d6b2a.js"><link rel="prefetch" href="/assets/js/71.30f092ba.js"><link rel="prefetch" href="/assets/js/8.553908b2.js"><link rel="prefetch" href="/assets/js/9.21f42c7d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2b9f24ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Ontop</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/tutorial/" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/research/" class="nav-link">
  Research
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  Dev
</a></div><div class="nav-item"><a href="/jobs/" class="nav-link">
  Work with us
</a></div> <a href="https://github.com/ontop/ontop" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/tutorial/" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/research/" class="nav-link">
  Research
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  Dev
</a></div><div class="nav-item"><a href="/jobs/" class="nav-link">
  Work with us
</a></div> <a href="https://github.com/ontop/ontop" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/guide/concepts.html" class="sidebar-link">Key concepts</a></li><li><a href="/guide/getting-started.html" class="sidebar-link">Getting started</a></li><li><a href="/guide/cli.html" class="sidebar-link">Command Line Interface</a></li><li><a href="/guide/compliance.html" class="sidebar-link">Standards compliance</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/advanced/predefined.html" class="sidebar-link">Predefined query endpoint (beta)</a></li><li><a href="/guide/advanced/logging.html" class="sidebar-link">Query logging</a></li><li><a href="/guide/advanced/caching.html" aria-current="page" class="active sidebar-link">HTTP caching</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/advanced/caching.html#remarks" class="sidebar-link">Remarks</a></li></ul></li><li><a href="/guide/advanced/configuration.html" class="sidebar-link">Configuration keys</a></li><li><a href="/guide/advanced/views.html" class="sidebar-link">Ontop views</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Troubleshooting</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/troubleshooting/faq.html" class="sidebar-link">FAQ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Meta</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/glossary.html" class="sidebar-link">Glossary</a></li><li><a href="/guide/releases.html" class="sidebar-link">Release notes</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="http-caching"><a href="#http-caching" class="header-anchor">#</a> HTTP caching</h1> <p><em>Since 4.1.0.</em></p> <p>HTTP caching allows to reduce the load on the SPARQL endpoint and to provide faster responses to clients.
It is particularly useful when many clients issue the same queries and data is not updated at a high frequency.</p> <p>To enable HTTP caching, add the property <code>ontop.http.cacheControl</code> in the properties file.
This will cause the insertion of a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control" target="_blank" rel="noopener"><code>Cache-Control</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> HTTP header in successful responses, with the specified value.</p> <div class="custom-block tip"><p class="custom-block-title">Example</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">ontop.http.cacheControl</span><span class="token punctuation">=</span><span class="token attr-value">max-age=60, stale-while-revalidate=20, stale-if-error=300</span>
</code></pre></div><p>This entry informs the cache that values can be considered as fresh for 60 seconds. After this period, the cache remains allowed to serve cached results for 20 more seconds while revalidating the requests in the background, or for 300 more seconds in case of error with the upstream server.</p></div> <p>Ontop does not embed a HTTP cache. We recommend setting up a HTTP cache like <a href="https://varnish-cache.org/" target="_blank" rel="noopener">Varnish<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="http://nginx.org" target="_blank" rel="noopener">Nginx<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> above the Ontop endpoint.</p> <h2 id="remarks"><a href="#remarks" class="header-anchor">#</a> Remarks</h2> <ul><li>Most caches (e.g. Nginx but also Web browsers) do not cache POST requests by default. Since most SPARQL queries are sent with the POST method, it is important to turn this option on. This option is safe as Ontop is a read-only system.</li> <li>Consider using the GET method for sending SPARQL queries so as to take advantage from Web browser caches.</li> <li>For an example of configuration for Nginx, see <a href="https://github.com/noi-techpark/it.bz.opendatahub.sparql/blob/eda53616c252691a73a8eb87963664cd06ca3e93/infrastructure/docker/nginx/default.conf" target="_blank" rel="noopener">this file<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ontop/ontop-website/edit/master/guide/advanced/caching.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/8/2022, 1:29:01 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/advanced/logging.html" class="prev">
        Query logging
      </a></span> <span class="next"><a href="/guide/advanced/configuration.html">
        Configuration keys
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5cb056e8.js" defer></script><script src="/assets/js/2.7079d958.js" defer></script><script src="/assets/js/28.47030f7b.js" defer></script>
  </body>
</html>
